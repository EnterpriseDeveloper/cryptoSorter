<div class="spynerBasic" *ngIf="loading">
    <spinner></spinner>
</div>

<div [class.display]='!loadingTable'>
        <div [class.emptyPadding]="!isEmptyWallet" [class.fullPadding]="isEmptyWallet">
                <p class="colorText text-center paddingCenter">
                        Please wait while we're brainstorming over a thousand 
                        of cryptocurrencies. Once loaded, navigation will be 
                        lightning fast! Still waiting? Try guessing which coin is moon today!
                </p>
       </div>
</div>


<div [class.display]='loadingTable'>
        <div class="buttonsTabs2 lenght">Showing {{perPage}} of {{dataLenght}} items.</div>

    <div class="tabStyle tableStyle2">
        <table id="currency-table" class="row-border hover table-striped" cellspacing="0" width="100%">
                <thead>
                        <tr>
                            <th class="colorText tableSize text-center paddingHeader">Actions</th> 
                            <th class="colorText tableSize nameWidth wallet paddingHeader" (click)="sort('name')">Name
                                <span class="fa" *ngIf="key =='name'" [ngClass]="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span></th>
                            <th class="colorText tableSize text-center wallet paddingHeader" (click)="sort('formulaValue')">Index
                                <span class="fa" *ngIf="key =='formulaValue'" [ngClass]="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span>
                            </th>
                            <th class="colorText tableSize text-center wallet paddingHeader" (click)="sort('market_cap_usd')">Market Cap
                                <span class="fa" *ngIf="key =='market_cap_usd'" [ngClass]="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span>
                            </th>
                            <th class="colorText tableSize text-center wallet paddingHeader" (click)="sort('24h_volume_usd')">Volume
                                <span class="fa" *ngIf="key =='24h_volume_usd'" [ngClass]="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span>
                            </th>
                            <th class="colorText tableSize text-center wallet paddingHeader" (click)="sort('percent_change_24h')">% 24h
                                <span class="fa" *ngIf="key =='percent_change_24h'" [ngClass]="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span>
                            </th>
                            <th class="colorText tableSize text-center wallet paddingHeader" (click)="sort('price_usd')">Price
                                <span class="fa" *ngIf="key =='price_usd'" [ngClass]="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span>
                            </th>   
                        </tr>
                    </thead>
                    <thead>
                        <tr>
                            <th ></th> 
                            <th ><div ><input class="form-control form-control-sm" type="text" 
                                name="name" [(ngModel)]="filter.name" placeholder="Search name"></div></th>
                            <th ><div ><input class="form-control form-control-sm" type="number"
                                name="formulaValue" [(ngModel)]="filter.formulaValue" min="1" step="1" placeholder="Search index"></div></th>
                            <th ><div ><input class="form-control form-control-sm" type="number" 
                                name="market_cap_usd" [(ngModel)]="filter.market_cap_usd" min="1" step="1" placeholder="Search market cap"></div></th>
                            <th ><div ><input class="form-control form-control-sm" type="number" 
                                name="24h_volume_usd" [(ngModel)]="filter['24h_volume_usd']" min="1" step="1" placeholder="Search volume"></div></th>
                            <th ><div ><input class="form-control form-control-sm" type="number" 
                                name="percent_change_24h" [(ngModel)]="filter.percent_change_24h" min="1" step="1" placeholder="Search %"></div></th>
                            <th ><div ><input class="form-control form-control-sm" type="number" 
                                name="price_usd" [(ngModel)]="filter.price_usd" min="1" step="1" placeholder="Search price"></div></th>   
                        </tr>
                    </thead>
        
        <tbody>
            <tr *ngFor="let row of data | orderBy: key : reverse | currencyfilter: filter | paginate: { itemsPerPage: perPage, currentPage: page } ; let i = index;">
                    <td width="120px">
                            <p class="center2"> 
                                <button class="btn btn-sm wallet"
                                [class.btn-outline-info]="!walletColor(row)"
                                [disabled]="walletColor(row)"
                                [class.added]="walletColor(row)"
                                (click)='getValueWallet(row, tabWallet)'
                                title="Add to Wallet">
                                <i class="fa"
                                [class.fa-plus-circle]="!walletColor(row)"
                                [class.fa-check-circle]="walletColor(row)"
                                aria-hidden="true"></i>
                            </button> 
                            <button
                            class="btn btn-sm like"
                            [class.btn-outline-success]="!likesColor(row)"
                            [class.chekt]="likesColor(row)"
                            [disabled]="likesColor(row)"
                            rel="tooltip" title="To Favorite" 
                            data-placement="left" (click)="getValueLike(row)">
                            <i class="fa"
                            [class.fa-thumbs-up]="!likesColor(row)"
                            [class.fa-check]="likesColor(row)"
                            aria-hidden="true"></i>
                        </button>
                        <button id='delete' [class.display]="likesColor(row)" 
                        class="btn btn-sm btn-outline-danger delete remove" 
                        rel="tooltip" title="To Deleted"
                        data-placement="left" (click)="getValueDislike(row, i)">
                        <i class="fa fa-trash" aria-hidden="true"></i>
                    </button></p>
                </td> 
                <td class="colorText tableSize">
                    <p class="tableName">
                        <img class="sizeImg"
                        src="https://chasing-coins.com/api/v1/std/logo/{{row.symbol}}">
                        {{row.name}}   
                        (<a target="_blank" href="https://coinmarketcap.com/currencies/{{row.id}}/" 
                    class="linksTable">{{row.symbol}}</a>)
                    </p>
                </td>
                <td class="colorText tableSize text-center">
                    <p class="centerWal">{{row.formulaValue | number :'1.2-2'}}</p></td>
                <td class="colorText tableSize text-center"><p class="centerWal">
                    {{row.market_cap_usd | currency:'USD'}}</p></td>
                <td class="colorText tableSize text-center">
                    <p class="centerWal">{{row['24h_volume_usd'] | currency:'USD'}}</p></td>
                <td width="100px" class="colorText tableSize text-center weight">
                    <p class="centerWal"><span [style.color]="row.percent_change_24h < 0 ? '#DC3545' : '#009130'">
                        {{row.percent_change_24h}} %</span></p></td>
                    <td width="120px" class="colorText tableSize text-center">
                        <p class="centerWal">$ {{row.price_usd | number :'1.2-2'}}</p></td> 
    </tr>
    <tr *ngIf="(data | currencyfilter: filter).length === 0">
            <td colspan="7" class="colorText text-center">No matching records found</td>
       </tr> 
</tbody>
</table>
<div class="row paddingTableWallet">
        <div class="col">
          <div ngbDropdown class="d-inline-block colorPaging"> Show
            <button class="btn btn-light btn-sm wallet" id="dropdownBasic1" ngbDropdownToggle>{{perPage}}</button>
            <div class="dropdownMenu" ngbDropdownMenu aria-labelledby="dropdownBasic1">
              <button class="dropdown-item wallet" (click)="switchCase('25')">25</button>
              <button class="dropdown-item wallet" (click)="switchCase('50')">50</button>
              <button class="dropdown-item wallet" (click)="switchCase('all')">All</button>
            </div> items.
          </div>
        </div>

<pagination-template class="buttonTabs padding-right" #p="paginationApi" (pageChange)="onPageChange($event)">

<ul class="pagination">
   <li class="page-item" [class.disabled]="p.isFirstPage()">
        <a class="page-link" href='#' (click)="link()" (click)="p.setCurrent(1)">First</a>
    </li>
    <li class="page-item" [class.disabled]="p.isFirstPage()">
        <a class="page-link" href='#' (click)="link()" (click)="p.previous()">Previous</a>
     </li>


     <li class="page-item" *ngFor="let page of p.pages" [class.active]="p.getCurrent() === page.value">
         <a class="page-link" href='#' (click)="link()" (click)="p.setCurrent(page.value)">{{page.value}}</a>
      </li>
      <li class="page-item" [class.disabled]="p.isLastPage()">
          <a class="page-link" href='#' (click)="link()" (click)="p.next()">Next</a>
      </li>
      <li class="page-item" [class.disabled]="p.isLastPage()">
           <a class="page-link" href='#' (click)="link()" (click)="p.getLastPage()">Last</a>
       </li>
  </ul>
</pagination-template>  
</div>
</div>

<ng-template #tabWallet let-c="close" let-d="dismiss"> 
    <div class="modal-body">
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button> 
        <h4 class="modal-title colorText text-center">Add coin to portfolio</h4> 
        
        <table class="cursorNone">
            <tr >
                <td class="tabWalletStyle colorText padWalletTable">Coin name:</td>
                <td colspan="2" class="tabWalletStyle2 colorText walletTable padWalletTable">
                    {{ currensy.name}}</td>
            </tr>
            <tr>
                <td class="tabWalletStyle colorText padWalletTable">Coin price: </td>
                <td colspan="2" class="tabWalletStyle2 colorText  walletTable colorPrice padWalletTable">
                   $ {{ currensy.price_usd | number :'1.2-2'}}</td>
            </tr>
            <tr>
                <td class="tabWalletStyle colorText padWalletTable">Total sum:</td>
                <td colspan="2" class="tabWalletStyle2 colorTotal walletTable padWalletTable">
                     {{ currensy.price_usd*coins | currency:'USD'}} </td>
            </tr>
            <tr>
                <td class="tabWalletStyle colorText padWalletTable">Amount:</td>  
                <td class="walletInputCoin padWalletTable">         
                    <form [formGroup]="numberForm" class="form-inline" >
                        <input (input)="coins = $event.target.value" value={{coins}}
                        class="form-control" type="number" id="example-search-input" 
                        formControlName="number" required> 
                    </form>   
                </td>  
                <td>
                    <button type="submit" [class.wallet]="numberForm.valid"
                     class="btn btn-info paddingTabBut" 
                    [disabled]="!numberForm.valid" (click)="createWallet(coins)">Add</button>
                </td>
                
            </tr>
            <tr>
                <td colspan="3" *ngIf="formErrors.number" class="alert alert-danger padWalletTable">
                    {{ formErrors.number }}
                </td>
            </tr>
            
        </table>
        
        <button type="button" class="btn btn-outline-secondary buttonTabs wallet" (click)="c('Close click')">Cancel</button>
        
        
    </div>
</ng-template>
</div>

<div class="push"></div>



